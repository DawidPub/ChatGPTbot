[supervisord]
nodaemon=true
user=root
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid

[program:xvfb]
command=/usr/bin/Xvfb :99 -screen 0 1920x1080x24 -ac +extension GLX +render -noreset
user=chatgpt
autostart=true
autorestart=true
stdout_logfile=/tmp/xvfb.log
stderr_logfile=/tmp/xvfb.log
priority=100

[program:fluxbox]
command=/usr/bin/fluxbox -display :99
user=chatgpt
autostart=true
autorestart=true
stdout_logfile=/tmp/fluxbox.log
stderr_logfile=/tmp/fluxbox.log
priority=200
environment=DISPLAY=":99"

[program:x11vnc]
command=/usr/bin/x11vnc -display :99 -nopw -listen localhost -xkb -ncache 10 -ncache_cr -forever
user=chatgpt
autostart=true
autorestart=true
stdout_logfile=/tmp/x11vnc.log
stderr_logfile=/tmp/x11vnc.log
priority=300
environment=DISPLAY=":99"

[program:chatgpt-api]
command=python chatgpt_api_server.py
directory=/app
user=chatgpt
autostart=true
autorestart=true
stdout_logfile=/tmp/chatgpt-api.log
stderr_logfile=/tmp/chatgpt-api.log
priority=400
environment=DISPLAY=":99",PYTHONPATH="/app",PYTHONUNBUFFERED="1"
